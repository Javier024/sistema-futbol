<!DOCTYPE html>
<html lang="es">
<head><meta charset="UTF-8"><title>Inventario</title><link rel="stylesheet" href="../assets/css/styles.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head>
<body><div id="app-layout"><div id="sidebar-placeholder"></div><main><header><h1>Inventario</h1></header><div id="view-container"></div></main></div><div id="toast-container"></div>
<script src="../assets/js/common.js"></script><script>
window.addEventListener('DOMContentLoaded', () => { if(!checkAuth()) return; renderSidebar('inventario'); loadInv(); });
function loadInv() { const rows = db.getAll('inventario_items').map(i => `<tr><td>${i.nombre}</td><td style="font-weight:bold;">${i.stock}</td><td>${i.stock<=i.stock_minimo?'<span class="badge bg-red">Bajo</span>':'<span class="badge bg-green">OK</span>'}</td><td><button class="btn btn-sm btn-secondary" onclick="mv(${i.id},1)">+</button> <button class="btn btn-sm btn-secondary" onclick="mv(${i.id},-1)">-</button></td></tr>`).join(''); document.getElementById('view-container').innerHTML = `<div class="card"><table><thead><tr><th>Item</th><th>Stock</th><th>Estado</th><th>Ajuste</th></tr></thead><tbody>${rows}</tbody></table></div>`; }
const mv = (id,q) => { const i = db.getById('inventario_items', id); if(i&&(i.stock+q)>=0){ db.update('inventario_items',id,{stock:i.stock+q}); loadInv(); } };
</script></body></html>